package com.bcj.restclient.controller;

import javax.servlet.http.HttpServletRequest;
import javax.ws.rs.Consumes;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestHeader;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

import com.bcj.restclient.model.Customer;
import com.bcj.restclient.service.CustomerService;

@Controller
public class CustomerController {

	@Autowired
	private CustomerService custService;

	public void setCustService(CustomerService custService) {
		this.custService = custService;
	}

	@RequestMapping("/")
	public String welcomepage() {
		System.out.println("customer0");
		return "index";
	}

	@RequestMapping("/postfrm")
	public String displayPostForm(Model model) {
		// custService.saveCustomer(cust);
		System.out.println("postform displayed");
		return "postfrm";
	}

	@RequestMapping("/putfrm")
	public String displayPutForm() {

		// System.out.println("getform displayed");
		return "putfrm";
	}

	@RequestMapping("/getfrm")
	public String getcustomer() {

		// System.out.println("getform displayed");
		return "getfrm";
	}

	/*
	 * @Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
	 * 
	 * @Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
	 */
	@RequestMapping("/getfrm/{id}")
	public @ResponseBody Customer getcustomerById(@PathVariable("id") String id) {		
		Customer c = custService.getCustomer(id);
		System.out.println(c.getFirstName() + "   " + c.getLastName() + "    " + c.getId());
		return c;
	}

	@RequestMapping(value = "/create", method = RequestMethod.POST)
	public @ResponseBody Customer submittedFromData(@RequestBody Customer cust, HttpServletRequest request) {

		System.out.println("create method");
		System.out.println(cust.getFirstName());
		System.out.println(cust.getLastName());
		Customer c = custService.saveCustomer(cust);
		System.out.println(c.getFirstName());
		System.out.println(c.getLastName());
		System.out.println(c.getId());

		return c;
	}

}
